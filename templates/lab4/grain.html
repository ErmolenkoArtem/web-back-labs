{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 4{% endblock %}

{% block main %}
<style>
    .order-container {
        max-width: 600px;
        margin: 0 auto;
        padding: 30px;
        background: linear-gradient(135deg, #fff8e1, #ffecb3);
        border-radius: 15px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        font-family: 'Trebuchet MS', sans-serif;
    }

    .order-title {
        text-align: center;
        color: #f9a825;
        margin-bottom: 30px;
        font-size: 28px;
    }

    .order-form {
        background: #fffde7;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);
        margin-bottom: 25px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: bold;
        color: #6d4c41;
    }

    .grain-select, .weight-input {
        width: 100%;
        padding: 12px;
        border: 2px solid #ffd54f;
        border-radius: 8px;
        font-size: 16px;
        background: #fffdf3;
    }

    .submit-btn {
        width: 100%;
        padding: 12px;
        background: linear-gradient(135deg, #fbc02d, #f9a825);
        color: #4e342e;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
    }

    .error-message {
        background: #fff3e0;
        color: #e65100;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #ef6c00;
        margin: 20px 0;
    }

    .success-message {
        background: #fffde7;
        color: #6d4c41;
        padding: 20px;
        border-radius: 10px;
        border-left: 4px solid #fbc02d;
        margin: 20px 0;
    }

    .discount-info {
        background: #fff8e1;
        color: #6d4c41;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #f9a825;
        margin: 15px 0;
    }

    .price-info {
        background: #fff8e1;
        padding: 20px;
        border-radius: 10px;
        margin-top: 25px;
        color: #6d4c41;
    }
</style>

<div class="order-container">
    <div class="order-title">üåæ –ó–∞–∫–∞–∑ –∑–µ—Ä–Ω–∞</div>
    
    <div class="order-form">
        <form method="post">
            <div class="form-group">
                <label for="grain_type">–í—ã–±–µ—Ä–∏—Ç–µ –∑–µ—Ä–Ω–æ:</label>
                <select id="grain_type" name="grain_type" class="grain-select" required>
                    <option value="barley">–Ø—á–º–µ–Ω—å - 12 000 —Ä—É–±/—Ç</option>
                    <option value="oats">–û–≤—ë—Å - 8 500 —Ä—É–±/—Ç</option>
                    <option value="wheat">–ü—à–µ–Ω–∏—Ü–∞ - 9 000 —Ä—É–±/—Ç</option>
                    <option value="rye">–†–æ–∂—å - 15 000 —Ä—É–±/—Ç</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="weight">–í–µ—Å (—Ç–æ–Ω–Ω—ã):</label>
                <input type="number" id="weight" name="weight" 
                    class="weight-input" 
                    min="0.1" step="0.1" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å –≤ —Ç–æ–Ω–Ω–∞—Ö" required>
            </div>
            
            <button type="submit" class="submit-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </form>
    </div>
    
    {% if error %}
        <div class="error-message">
            ‚ö†Ô∏è {{ error }}
        </div>
    {% endif %}
    
    {% if success %}
        <div class="success-message">
            <h3>‚úÖ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω</h3>
            <p>–í—ã –∑–∞–∫–∞–∑–∞–ª–∏ <strong>{{ grain_name }}</strong></p>
            <p>–í–µ—Å: <strong>{{ weight }} —Ç</strong></p>
            <p>–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ: <strong>{{ "%.2f"|format(total) }} —Ä—É–±</strong></p>
            
            {% if has_discount %}
                <div class="discount-info">
                    <p>üéâ –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —Å–∫–∏–¥–∫–∞ 10% –∑–∞ –±–æ–ª—å—à–æ–π –æ–±—ä—ë–º</p>
                    <p>–†–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏: <strong>{{ "%.2f"|format(discount) }} —Ä—É–±</strong></p>
                </div>
            {% endif %}
        </div>
    {% endif %}
    
    <div class="price-info">
        <h4>üí∞ –¶–µ–Ω—ã –Ω–∞ –∑–µ—Ä–Ω–æ:</h4>
        <ul>
            <li>–Ø—á–º–µ–Ω—å: 12 000 —Ä—É–±/—Ç</li>
            <li>–û–≤—ë—Å: 8 500 —Ä—É–±/—Ç</li>
            <li>–ü—à–µ–Ω–∏—Ü–∞: 9 000 —Ä—É–±/—Ç</li>
            <li>–†–æ–∂—å: 15 000 —Ä—É–±/—Ç</li>
        </ul>
        <p style="margin-top: 10px; color: #6d4c41;">
            üí° <strong>–°–∫–∏–¥–∫–∞ 10%</strong> –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –±–æ–ª–µ–µ 10 —Ç–æ–Ω–Ω
        </p>
    </div>
</div>

{% endblock %}
